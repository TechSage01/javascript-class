<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Happy Birthday, Mum ğŸ‚</title>
  <style>
    :root{
      --bg: linear-gradient(135deg,#fff7f0,#fff0f8);
      --card: #fff;
      --accent: #ff4d6d;
      --muted: #666;
    }
    html,body{height:100%; margin:0; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial;}
    body{
      background: var(--bg);
      display:flex;
      align-items:center;
      justify-content:center;
      padding:24px;
    }
    .card{
      width:100%;
      max-width:820px;
      background:var(--card);
      border-radius:14px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.08);
      overflow:hidden;
      position:relative;
    }
    header{
      padding:22px;
      background:linear-gradient(90deg, rgba(255,77,109,0.12), rgba(255,165,180,0.06));
      display:flex;
      gap:16px;
      align-items:center;
    }
    .avatar{
      width:64px; height:64px; border-radius:12px; background:linear-gradient(135deg,#ffd6e0,#ffd1b3);
      display:flex; align-items:center; justify-content:center; font-size:28px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.06);
    }
    h1{font-size:20px; margin:0; color:#222;}
    p.sub{margin:0;font-size:13px;color:var(--muted)}
    .body{
      padding:28px;
      display:grid;
      grid-template-columns: 1fr 320px;
      gap:20px;
    }
    .message {
      background:linear-gradient(180deg, rgba(255,245,247,0.6), rgba(255,255,255,0.8));
      border-radius:10px;
      padding:20px;
      min-height:260px;
      box-shadow: inset 0 1px 0 rgba(255,255,255,0.6);
      position:relative;
      overflow:auto;
      font-size:16px;
      line-height:1.6;
    }
    .controls{
      padding:18px;
      border-radius:10px;
      background:linear-gradient(180deg,#fff,#fffaf6);
      box-shadow: 0 6px 18px rgba(0,0,0,0.04);
      height:100%;
      display:flex;
      flex-direction:column;
      gap:12px;
    }
    button{
      border:0; padding:10px 12px; border-radius:8px; cursor:pointer; font-weight:600;
      background:var(--accent); color:white;
    }
    .small {
      background:#eee;color:#333;font-weight:600;
      padding:8px;border-radius:8px; border:0; cursor:pointer;
    }
    .copy-note{font-size:13px;color:var(--muted); margin-top:6px}
    .message pre{white-space:pre-wrap; font-family:inherit; font-size:16px; margin:0}
    .footer{padding:14px;text-align:center;color:var(--muted); font-size:13px}
    canvas.confetti{
      position:absolute; left:0; top:0; width:100%; height:100%; pointer-events:none;
    }

    /* responsive */
    @media (max-width:820px){
      .body{grid-template-columns:1fr; }
      .controls{order:2}
    }
  </style>
</head>
<body>
  <div class="card" aria-live="polite">
    <canvas class="confetti"></canvas>

    <header>
      <div class="avatar" id="avatar">ğŸ‘‘</div>
      <div>
        <h1 id="title">Happy Birthday, Mum! ğŸ‚</h1>
        <p class="sub">A heartfelt message from your child â€” typed & animated just for today.</p>
      </div>
    </header>

    <div class="body">
      <div>
        <div class="message" id="messageBox" role="article" aria-label="Birthday message">
          <pre id="typedText"></pre>
        </div>

        <div style="margin-top:12px; display:flex; gap:8px;">
          <button id="replayBtn">Replay Animation âœ¨</button>
          <button class="small" id="showFullBtn">Show Full Message</button>
          <button class="small" id="copyBtn">Copy Message</button>
          <button class="play-btn" id="play-btn">music</button>
        </div>
      </div>

      <aside class="controls" aria-hidden="false">
        <div><strong>Options</strong></div>
        <label style="font-size:14px; color:var(--muted)">Mother's name (optional)</label>
        <input id="momName" type="text" placeholder="e.g.Aunty Seri" style="padding:10px;border-radius:8px;border:1px solid #eee;">
        <label style="font-size:14px; color:var(--muted)">Typing speed (ms per char)</label>
        <input id="speed" type="range" min="8" max="40" value="14">
        <div style="display:flex; gap:8px; margin-top:auto;">
          <button id="showBtn">Show Greeting</button>
          <button id="shareBtn" class="small">Share (open copy)</button>
        </div>
        <p class="copy-note">Tip: You can edit the name and press "Show Greeting" to personalize the text.</p>
      </aside>
    </div>

    <div class="footer">Made with â¤ï¸ â€” Open in a browser & send to Mum today!</div>
  </div>

 <script>

    const BASE_MESSAGE = (name) => `Happy Birthday to you my beautiful mother ${name ? 'â€” ' + name : ''} â¤ï¸ğŸ‰

We argue, we fight, we stress each other sometimes ğŸ˜…â€¦ but the truth is â€” we always settle it within minutes because our love is stronger than any disagreement. Thatâ€™s how strong our bond is â¤ï¸ğŸ¤

Thank you for every sacrifice you have made just to see us growâ€¦ ğŸŒ±
Thank you for the unconditional love you give even when we don't deserve it ğŸ¤
Thank you for being our strength, our comfort, and our teacher ğŸŒŸ

You are a woman of courage, patience, and endless love ğŸ’ªâ¤ï¸
I pray that Allah fills your life with good health, peace of mind, and endless joy ğŸ¤²âœ¨
May all your expectations, secret wishes, and silent prayers come to pass ğŸ™ğŸ’«
May blessings follow you everywhere you go, and may your heart always smile ğŸ¤ğŸ™‚

We love you deeply, Mom â¤ï¸
You are our blessing, our pride, and our forever queen ğŸ‘‘ğŸ’

Keep shiningâ€¦ keep winningâ€¦ keep being the wonderful mother that you are ğŸ‰ğŸ‰

Happy Birthday Mummy!!! ğŸ‚ğŸˆğŸ’–
Allah continue to protect you and make you happy always. Ameen ğŸ¤²âœ¨
`;

    /***********************
     * Typewriter
     ***********************/
    const typedTextEl = document.getElementById('typedText');
    const speedEl = document.getElementById('speed');
    const momNameEl = document.getElementById('momName');
    const showFullBtn = document.getElementById('showFullBtn');
    let typingTimeout;
    let isFullShown = false;

    function typeMessage(text, speed=14){
      cancelTyping();
      typedTextEl.textContent = '';
      let i = 0;
      function step(){
        typedTextEl.textContent += text.charAt(i);
        i++;
        if(i < text.length){
          typingTimeout = setTimeout(step, speed);
        }
      }
      step();
    }
    function cancelTyping(){ clearTimeout(typingTimeout); }

    document.getElementById('showBtn').addEventListener('click', ()=>{
      isFullShown = false;
      const name = momNameEl.value.trim();
      const message = BASE_MESSAGE(name);
      typeMessage(message, Number(speedEl.value));
      startConfetti();
    });

    showFullBtn.addEventListener('click', ()=>{
      isFullShown = !isFullShown;
      if(isFullShown){
        cancelTyping();
        typedTextEl.textContent = BASE_MESSAGE(momNameEl.value.trim());
        showFullBtn.textContent = 'Hide Full Message';
      } else {
        showFullBtn.textContent = 'Show Full Message';
        typeMessage(BASE_MESSAGE(momNameEl.value.trim()), Number(speedEl.value));
      }
    });

    document.getElementById('copyBtn').addEventListener('click', async ()=>{
      try{
        await navigator.clipboard.writeText(BASE_MESSAGE(momNameEl.value.trim()));
        alert('Message copied âœ… Paste it anywhere!');
      }catch(e){
        prompt('Copy this:', BASE_MESSAGE(momNameEl.value.trim()));
      }
    });

    document.getElementById('shareBtn').addEventListener('click', ()=>{
      const text = encodeURIComponent(BASE_MESSAGE(momNameEl.value.trim()));
      const w = window.open('', '_blank');
      w.document.body.style.fontFamily='Arial';
      const pre = w.document.createElement('pre');
      pre.textContent = decodeURIComponent(text);
      pre.style.whiteSpace='pre-wrap';
      pre.style.padding='20px';
      w.document.title = 'Birthday Message';
      w.document.body.appendChild(pre);
    });

    window.addEventListener('load', ()=>{
      momNameEl.value = '';
      document.getElementById('replayBtn').addEventListener('click', ()=>{
        const name = momNameEl.value.trim();
        typeMessage(BASE_MESSAGE(name), Number(speedEl.value));
        startConfetti();
      });
      typeMessage(BASE_MESSAGE(''), Number(speedEl.value));
      startConfetti();
    });

    const canvas = document.querySelector('canvas.confetti');
    const ctx = canvas.getContext('2d');
    let W, H;
    function resizeCanvas(){
      W = canvas.width = canvas.clientWidth;
      H = canvas.height = canvas.clientHeight;
    }
    window.addEventListener('resize', resizeCanvas);
    resizeCanvas();

    const particles = [];
    const colors = ['#FF5C8A','#FFD166','#6EE7B7','#80FFDB','#B39CFF','#FFB3C6'];

    function createParticle(){
      const x = Math.random()*W;
      const y = -10;
      const size = 6 + Math.random()*8;
      const vx = -2 + Math.random()*4;
      const vy = 2 + Math.random()*4;
      const color = colors[Math.floor(Math.random()*colors.length)];
      const rot = Math.random()*360;
      particles.push({x,y,size,vx,vy,color,rot,dr: (Math.random()-0.5)*0.2});
      if(particles.length>300) particles.splice(0, particles.length-30);
    }

    let confettiRunning = false;
    let confettiTimer;
    function startConfetti(duration = 4500){
      confettiRunning = true;
      const start = Date.now();
      clearInterval(confettiTimer);
      confettiTimer = setInterval(()=>{ createParticle(); }, 40);
      requestAnimationFrame(animate);
      setTimeout(stopConfetti, duration);
    }
    function stopConfetti(){
      confettiRunning = false;
      clearInterval(confettiTimer);
    }

    function animate(){
      ctx.clearRect(0,0,W,H);
      for(let i=0;i<particles.length;i++){
        const p = particles[i];
        p.x += p.vx;
        p.y += p.vy;
        p.rot += p.dr;
        p.vy += 0.03;
        ctx.save();
        ctx.translate(p.x,p.y);
        ctx.rotate(p.rot);
        ctx.fillStyle = p.color;
        ctx.fillRect(-p.size/2, -p.size/2, p.size, p.size*0.6);
        ctx.restore();
      }
      for(let i = particles.length-1; i>=0; i--){
        if(particles[i].y > H + 40 || particles[i].x < -60 || particles[i].x > W+60) particles.splice(i,1);
      }
      if(confettiRunning || particles.length>0){
        requestAnimationFrame(animate);
      }
    }

    /***********************
     * âœ… AUTO-PLAY MUSIC
     ***********************/

  const audio = new Audio("music/Asake_-_Fuji_Vibe.mp3");
  audio.loop = true;
  audio.volume = 0.8;

  const playBtn = document.getElementById('play-btn');
  let isPlaying = false;

  playBtn.addEventListener('click', function(e) {
    e.stopPropagation();
    if (isPlaying) {
      audio.pause();
      playBtn.textContent = 'Play Music';
    } else {
      audio.play().then(() => {
        playBtn.textContent = 'Pause Music';
      }).catch(err => {
        alert('Music could not play automatically. Please click again or check your browser settings.');
      });
    }
    isPlaying = !isPlaying;
  });

  // If user interacts anywhere else, allow music to start (for autoplay policy)
  document.body.addEventListener('click', function enableAudioOnce() {
    audio.play().catch(()=>{});
    document.body.removeEventListener('click', enableAudioOnce);
  });

</script>
</body>
</html>
